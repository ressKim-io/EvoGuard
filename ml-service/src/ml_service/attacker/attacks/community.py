"""Community-specific slang and emoji attack strategies.

Phase 7 (2026) ì»¤ë®¤ë‹ˆí‹° íŠ¹í™” ê³µê²© ì „ëµ:
1. ì»¤ë®¤ë‹ˆí‹° ì€ì–´ (DC, ë£¨ë¦¬ì›¹, ì—í¨ì½”ë¦¬ì•„)
2. ìŒì„±/ë°œìŒ ê¸°ë°˜ ë³€í˜•
3. ì´ëª¨ì§€ ì¡°í•© ê°•í™”
"""

from __future__ import annotations

import random


# =============================================================================
# ì»¤ë®¤ë‹ˆí‹°ë³„ ì€ì–´ ë§¤í•‘
# =============================================================================

COMMUNITY_SLANG = {
    # ë””ì‹œì¸ì‚¬ì´ë“œ ìš©ì–´
    "dc": {
        "ë³‘ì‹ ": ["ë¸…ì‹ ", "ã…‚ã……", "ë³‘1ì‹ ", "ë¹™ì‹ ", "ë²¼ì—‰ì‹ "],
        "ë¯¸ì¹œ": ["ë¯¸1ì¹œ", "ë¯»ì¹œ", "ã…ã…Š", "ë¯»íŒ", "ë¯¸ì¹œã…‹"],
        "ì‹œë°œ": ["ã……ã…‚", "ì‹œ1ë°œ", "ì”¨ë¹¨", "ì‹œë°”", "ì‹œë²Œ"],
        "ì¡´ë‚˜": ["ì¡¸ë¼", "ì¡´1ë‚˜", "ã…ˆã„´", "ì¡´ë‚´", "ì¡¸ë¼ë¦¬"],
        "ìƒˆë¼": ["ìƒ‰íˆ", "ìƒ ê¸°", "ã……ã„²", "ìŒ”ë¼", "ìƒ‰ê¸°"],
        "êº¼ì ¸": ["êº¼ì§€ë¼", "ê»´ì €", "ã„²ã…ˆ", "êº¼ì €ë¼"],
        "ì£½ì–´": ["ì£¼ê±°", "ì¤˜ê±°", "ã…ˆã…‡", "ë’¤ì ¸", "ë””ì ¸"],
        "ì°ë”°": ["ã…‰ã„·", "ì°1ë”°", "ì°íƒ€", "ì°ë”°ë¦¬"],
        "ë…¸ë‹µ": ["ã„´ã„·", "ë…¸1ë‹µ", "ë…¸ì•¤ë‹µ"],
    },
    # ë£¨ë¦¬ì›¹ ìš©ì–´
    "ruliweb": {
        "í˜ì˜¤": ["í‰ì˜¤", "ê»´ì˜¤", "ã…ã…‡"],
        "ì“°ë ˆê¸°": ["ìŠ¤ë ˆê¸°", "ì‘¤ë ˆê¸°", "ì“°ë™"],
        "ë¨¸ì €ë¦¬": ["ë¨¸1ì €ë¦¬", "ë¨¼ì €ë¦¬", "ë­ì €ë¦¬"],
        "í•œì‹¬": ["ã…ã……", "í•œ1ì‹¬", "í•¸ì‹¬"],
        "ë‹µë‹µ": ["ã„·ã„·", "ë‹µ1ë‹µ", "ë•ë•"],
    },
    # ì—í¨ì½”ë¦¬ì•„ ìš©ì–´
    "fmkorea": {
        "ë…¸ì¼": ["ê°œë…¸ì¼", "í•µë…¸ì¼", "ã„´ã…ˆ"],
        "ê¼´í†µ": ["ã„²ã…Œ", "ê¼¬í†µ", "ê¼´1í†µ"],
        "ì°ë”°": ["ã…‰ã„·", "ì°1ë”°", "ì°ë¹ "],
        "ê¸‰ì‹ì¶©": ["ê¸‰ì‹", "ê¸‰ì‹ã…Š", "ê¸‰1ì‹ì¶©"],
        "í‹€ë”±": ["ã…Œã„·", "í‹€1ë”±", "í‹€ë”±ì¶©"],
    },
    # ê³µí†µ ì¸í„°ë„· ìš©ì–´
    "common": {
        "ì§„ì§œ": ["ã„¹ã…‡", "ë¦¬ì–¼", "ë ˆì•Œ", "ã…ˆã…‰"],
        "ê°œ": ["ê°“", "ê²ë‚˜", "ì¡´ë‚˜", "í•µ"],
        "ì§œì¦": ["ã…‰ã…‰", "ì§±ë‚˜", "ì§±ë‚¨"],
        "ì–´ê·¸ë¡œ": ["ì–´1ê·¸ë¡œ", "ì–´ê¸€", "ì–µê·¸ë¡œ"],
        "í˜ì§¤": ["ã…ã…ˆ", "í˜1ì§¤", "í‰ì§¤"],
        "í—¬": ["ì§€ì˜¥", "hell", "í•¼"],
        "ã„±ã…‡ã…‡": ["ê·€ì—¬ì›Œ", "ã„±ã…‡ã…‡", "ê·€ì—½"],
    },
}

# =============================================================================
# ìŒì„±/ë°œìŒ ê¸°ë°˜ ë³€í˜• ë§¤í•‘
# =============================================================================

PHONETIC_MAP = {
    # í•œê¸€ ë°œìŒ ë³€í˜• (êµ¬ì–´ì²´/ë¹„í‘œì¤€ ë°œìŒ)
    "ì‹œë°œ": ["ì”¨ë°œ", "ì‹œíŒ”", "ì‹œë°¯", "ì‰¬ë°œ", "ì”Œë°œ", "ì‹œë°”ì•Œ"],
    "ë³‘ì‹ ": ["ë³‘ì”¬", "ë¼ì‹ ", "ë²µì‹ ", "ë³˜ì‹ ", "ë±…ì”¬"],
    "ìƒˆë¼": ["ì„¸ë¼", "ìŒ”ë¼", "ìƒ›ê¸°", "ìŒ”ê¸°", "ìŒë¼"],
    "ì§€ë„": ["ì§€ëŸ´", "ì§€ë¡¤", "ì¥ë„", "ì§€ë‘"],
    "ë¯¸ì¹œ": ["ë¯¸í‹´", "ë¯¸ì¹€", "ë®ˆì¹œ", "ë¯œì¹œ"],
    "êº¼ì ¸": ["ê»´ì ¸", "êº¼ì§€", "êº¼ì§€ë¼", "êº¼ì €"],
    "ì£½ì–´": ["ì£¼ê±°", "ì¥¬ê±°", "ì£¼ê·¸", "ì­ˆê±°"],
    "ë‹¥ì³": ["ë‹¥ì³ë¼", "ë‹¥ì²˜", "íƒì³", "ë‹­ì³"],

    # ìˆ«ì-ë°œìŒ ì¡°í•© (ì¤‘ê°„ ì‚½ì…)
    "ì‹œ": ["ì‹œ1", "C", "ì”¨", "ì‰¬"],
    "ë°œ": ["8", "bal", "ë¹¨", "ë²Œ"],
    "ë³‘": ["ë³‘1", "byung", "ë¼", "ë²µ"],
    "ì‹ ": ["ì”¬", "shin", "ì”¨ã„´", "ì‹ ã„´"],

    # ì™¸ë˜ì–´ ë°œìŒ ë³€í˜•
    "fuck": ["ë»‘", "ë»‘í", "í½", "f**k"],
    "shit": ["ì‰¿", "ì’¯", "ì‰£", "ì’‹"],
    "bitch": ["ë¹—ì¹˜", "ë¹„ì¹˜", "ë¹„ã…Š", "ë¹—ã…Š"],
    "damn": ["ëŒ", "ë€", "ëŒì‡"],
    "ass": ["ì• ìŠ¤", "ì—£ìŠ¤", "ì•„ìŠ¤"],
}

# =============================================================================
# ì´ëª¨ì§€ ì¡°í•© ë§¤í•‘
# =============================================================================

EMOJI_COMBOS = {
    "ë¶„ë…¸": ["ğŸ–•ğŸ˜¡", "ğŸ’¢ğŸ¤¬", "ğŸ˜¤ğŸ‘Š", "ğŸ”¥ğŸ’€", "ğŸ˜ ğŸ’¢"],
    "í˜ì˜¤": ["ğŸ¤®ğŸ¤¢", "ğŸ’©ğŸš½", "ğŸ¤¡ğŸ‘", "ğŸ¤¢ğŸ¤®", "ğŸ’€ğŸ‘"],
    "ë¹„í•˜": ["ğŸ·ğŸ•", "ğŸ¦ ğŸ—‘ï¸", "ğŸ’€â˜ ï¸", "ğŸ¤¡ğŸª", "ğŸ›ğŸª²"],
    "ê°•ì¡°": ["âš¡ğŸ”¥", "ğŸ’¥ğŸ’¢", "â—â—", "â€¼ï¸âš¡", "ğŸ”¥ğŸ”¥"],
    "ì¡°ë¡±": ["ğŸ¤£ğŸ‘‰", "ğŸ˜‚ğŸ¤¡", "ğŸ¤ªğŸ­", "ğŸ˜†ğŸ‘†", "ğŸ¤£ğŸª"],
    "ê²½ë©¸": ["ğŸ˜’ğŸ‘", "ğŸ™„ğŸ’…", "ğŸ˜‘ğŸš®", "ğŸ™ƒğŸ‘‹", "ğŸ˜¤ğŸ’¨"],
}

# í…ìŠ¤íŠ¸-ì´ëª¨ì§€ ì¹˜í™˜ ë§¤í•‘
TEXT_TO_EMOJI = {
    "ë³‘ì‹ ": ["ğŸ§ âŒ", "ğŸ¤•ğŸ’€", "ğŸ¤¡"],
    "ë°”ë³´": ["ğŸ¤ª", "ğŸ¥´", "ğŸ¤¡"],
    "ì“°ë ˆê¸°": ["ğŸ—‘ï¸", "ğŸš®", "ğŸ’©"],
    "ë¼ì§€": ["ğŸ·", "ğŸ–", "ğŸ½"],
    "ê°œ": ["ğŸ•", "ğŸ¶", "ğŸ©"],
    "ì£½ì–´": ["ğŸ’€", "â˜ ï¸", "âš°ï¸"],
    "êº¼ì ¸": ["ğŸ‘‹", "ğŸšª", "ğŸ–•"],
    "ë¯¸ì¹œ": ["ğŸ¤¯", "ğŸ¤ª", "ğŸ˜µ"],
    "ì‹œë°œ": ["ğŸ¤¬", "ğŸ–•", "ğŸ’¢"],
}

# ë¬¸ì¥ ë ê°ì • ì´ëª¨ì§€
ENDING_EMOJIS = ["ğŸ¤¬", "ğŸ˜¡", "ğŸ’¢", "ğŸ”¥", "ğŸ˜¤", "ğŸ’€", "ğŸ–•", "ğŸ‘Š", "ğŸ¤®", "ğŸ˜ˆ"]


# =============================================================================
# Attack Strategy Implementations
# =============================================================================

def community_slang_attack(text: str) -> str:
    """ì»¤ë®¤ë‹ˆí‹° íŠ¹í™” ì€ì–´ ê³µê²©: DC, ë£¨ë¦¬ì›¹, ì—í¨ì½”ë¦¬ì•„ ë“±ì˜ ì€ì–´ë¡œ ë³€í™˜.

    Example: ë³‘ì‹  â†’ ë¸…ì‹ , ì§„ì§œ â†’ ã„¹ã…‡
    """
    result = text

    # ëª¨ë“  ì»¤ë®¤ë‹ˆí‹°ì˜ ìŠ¬ë­ ì ìš©
    for community, slang_dict in COMMUNITY_SLANG.items():
        for original, slangs in slang_dict.items():
            if original in result and random.random() < 0.6:
                result = result.replace(original, random.choice(slangs), 1)

    return result


def phonetic_transform_attack(text: str) -> str:
    """ìŒì„± ë³€í™˜ ê³µê²©: ë°œìŒ ê¸°ë°˜ìœ¼ë¡œ í…ìŠ¤íŠ¸ ë³€í˜•.

    Example: ì‹œë°œ â†’ ì”¨ë°œ, ë³‘ì‹  â†’ ë¼ì‹ 
    """
    result = text

    # ì™„ì „ ë‹¨ì–´ ë§¤ì¹­ ìš°ì„ 
    for original, phonetics in PHONETIC_MAP.items():
        if len(original) > 1 and original in result and random.random() < 0.7:
            result = result.replace(original, random.choice(phonetics), 1)

    # ë‹¨ì¼ ë¬¸ì ì¹˜í™˜ (ë‚®ì€ í™•ë¥ )
    for original, phonetics in PHONETIC_MAP.items():
        if len(original) == 1 and original in result and random.random() < 0.3:
            result = result.replace(original, random.choice(phonetics), 1)

    return result


def emoji_combo_attack(text: str) -> str:
    """ì´ëª¨ì§€ ì¡°í•© ê°•í™” ê³µê²©: ì˜ë¯¸ ì „ë‹¬ ì´ëª¨ì§€ ì¡°í•©ìœ¼ë¡œ ë³€í™˜.

    Example: ë³‘ì‹  â†’ ğŸ§ âŒ, ì‹œë°œ â†’ ğŸ¤¬ğŸ–•
    """
    result = text

    # í…ìŠ¤íŠ¸ë¥¼ ì´ëª¨ì§€ë¡œ ì¹˜í™˜ (ë‚®ì€ í™•ë¥ )
    for word, emojis in TEXT_TO_EMOJI.items():
        if word in result and random.random() < 0.3:
            result = result.replace(word, random.choice(emojis), 1)

    # ì´ëª¨ì§€ ì‚½ì… (ë‹¨ì–´ ì‚¬ì´ ë˜ëŠ” ë)
    words = result.split()
    new_words = []

    for i, word in enumerate(words):
        new_words.append(word)
        # ë‹¨ì–´ ì‚¬ì´ì— ê°ì • ì´ëª¨ì§€ ì‚½ì…
        if i < len(words) - 1 and random.random() < 0.2:
            combo_type = random.choice(list(EMOJI_COMBOS.keys()))
            combo = random.choice(EMOJI_COMBOS[combo_type])
            new_words.append(combo)

    result = ' '.join(new_words)

    # ë¬¸ì¥ ëì— ì´ëª¨ì§€ ì¶”ê°€
    if random.random() < 0.5:
        result += ' ' + random.choice(ENDING_EMOJIS)

    return result


# Export all
__all__ = [
    'community_slang_attack',
    'phonetic_transform_attack',
    'emoji_combo_attack',
    'COMMUNITY_SLANG',
    'PHONETIC_MAP',
    'EMOJI_COMBOS',
    'TEXT_TO_EMOJI',
    'ENDING_EMOJIS',
]

# 🗓️ 07. 개발 로드맵

> 12주 개발 계획 및 주차별 상세 태스크

---

## 📅 전체 일정 개요

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                          12주 개발 로드맵                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  Phase 1: 환경 셋업 (Week 1-2)         ✅ 완료                                 │
│  ████████████████████████████████████████████████████████████████ 100%          │
│                                                                                 │
│  Phase 2: 공격자 구축 (Week 3-5)       ✅ 완료                                 │
│  ████████████████████████████████████████████████████████████████ 100%          │
│                                                                                 │
│  Phase 3: 방어자 + Fine-tuning (Week 6-9)  ✅ 완료                            │
│  ████████████████████████████████████████████████████████████████ 100%         │
│                                                                                 │
│  Phase 4: MLOps 자동화 (Week 10-11)    ✅ 완료                                 │
│  ████████████████████████████████████████████████████████████████ 100%         │
│                                                                                 │
│  Phase 5: 문서화 & 포트폴리오 (Week 12) 🔄 진행중                              │
│  ████████████████████████████████████████████████░░░░░░░░░░░░░░░  70%           │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

## 📍 Phase 1: 환경 셋업 (Week 1-2) ✅

### 목표
- 개발 환경 완전 구축
- 기본 프로젝트 구조 생성
- Ollama + Mistral 7B 동작 확인

### Week 1: 인프라 & 환경

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | WSL2 + Docker + GPU 설정 | 4h | `nvidia-smi` Docker 내부에서 동작 |
| 2 | Ollama 설치 + Mistral 7B 다운로드 | 2h | `ollama run mistral` 응답 확인 |
| 3 | Docker Compose (PostgreSQL, Redis, MLflow) | 3h | 모든 서비스 정상 기동 |
| 4 | Python 환경 (PyTorch + CUDA 확인) | 2h | `torch.cuda.is_available() == True` |
| 5 | Go 환경 + Gin 프로젝트 초기화 | 2h | `go run main.go` 헬스체크 응답 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] `docker-compose.yml` 작동
- [x] Ollama API 테스트 스크립트
- [x] Go/Python 프로젝트 뼈대

### Week 2: 기본 API & DB

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | PostgreSQL 스키마 생성 | 2h | 테이블 생성 완료 |
| 2 | Go GORM 모델 정의 | 3h | CRUD 동작 확인 |
| 3 | Go Battle API 기본 구조 | 4h | POST/GET /battles 동작 |
| 4 | Python FastAPI 기본 구조 | 3h | /classify 엔드포인트 동작 |
| 5 | Go ↔ Python 통신 테스트 | 2h | Battle에서 classify 호출 성공 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] DB 스키마 마이그레이션
- [x] Battle API 기본 CRUD
- [x] Inference API 기본 엔드포인트

---

## ⚔️ Phase 2: 공격자 구축 (Week 3-5) ✅

### 목표
- 다양한 공격 전략 구현
- Ollama LLM 연동
- 공격자 오케스트레이터 완성

### Week 3: 규칙 기반 전략

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | AttackStrategy 인터페이스 설계 | 2h | 인터페이스 정의 완료 |
| 2 | UnicodeEvasionStrategy 구현 | 4h | 5가지 변형 동작 |
| 3 | HomoglyphStrategy 구현 | 3h | 동형 문자 치환 동작 |
| 4 | LeetSpeakStrategy 구현 | 2h | 리트스피크 변형 동작 |
| 5 | 전략 단위 테스트 | 3h | 테스트 커버리지 80%+ |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] `attacker/strategies/` 디렉토리 구조
- [x] 규칙 기반 전략 3개
- [x] 단위 테스트

### Week 4: LLM 기반 전략

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | Ollama HTTP 클라이언트 | 2h | API 호출 성공 |
| 2 | LLMEvasionStrategy 구현 | 4h | 프롬프트로 변형 생성 |
| 3 | 프롬프트 엔지니어링 & 튜닝 | 4h | 품질 좋은 변형 생성 |
| 4 | AdversarialLLMStrategy 구현 | 3h | 이전 실패 패턴 학습 |
| 5 | LLM 전략 테스트 | 3h | E2E 테스트 통과 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] Ollama 클라이언트 모듈
- [x] LLM 기반 전략 2개
- [x] 프롬프트 템플릿 라이브러리

### Week 5: 공격자 통합

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | AttackerOrchestrator 구현 | 3h | 전략 조합 실행 |
| 2 | 전략 가중치 & 선택 로직 | 2h | 가중치 기반 선택 동작 |
| 3 | Battle API ↔ Attacker 연동 | 3h | 라운드에서 공격 생성 |
| 4 | 원본 데이터셋 준비 (Jigsaw 샘플) | 3h | 1000개 샘플 준비 |
| 5 | 공격자 E2E 테스트 | 3h | 100 라운드 배틀 성공 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] 공격자 오케스트레이터 완성
- [ ] Jigsaw 샘플 데이터셋
- [x] 공격자 ↔ API 통합

---

## 🛡️ Phase 3: 방어자 + Fine-tuning (Week 6-9) 🔄

### 목표
- 베이스라인 방어 모델 구축
- QLoRA Fine-tuning 파이프라인
- Champion/Challenger 구조 구현

### Week 6: 베이스라인 모델

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | BERT 분류 모델 구현 | 3h | 추론 동작 확인 |
| 2 | toxic-bert 또는 사전학습 모델 로드 | 2h | 기본 분류 성능 확인 |
| 3 | FastAPI 추론 서비스 완성 | 3h | /classify 배치 처리 |
| 4 | Battle API ↔ Defender 연동 | 3h | 라운드에서 분류 호출 |
| 5 | 베이스라인 성능 측정 | 3h | F1, Precision, Recall 기록 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] 베이스라인 방어 모델
- [x] 추론 서비스 완성
- [ ] 베이스라인 메트릭 기록

### Week 7: QLoRA Fine-tuning 환경

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | PEFT + bitsandbytes 환경 설정 | 3h | 4-bit 로딩 성공 |
| 2 | 학습 데이터 전처리 파이프라인 | 3h | 토크나이징 완료 |
| 3 | QLoRA 학습 설정 (LoraConfig) | 2h | 설정 파일 완성 |
| 4 | 첫 Fine-tuning 테스트 (10 샘플) | 4h | 학습 루프 동작 확인 |
| 5 | VRAM 최적화 & 디버깅 | 4h | 8GB VRAM 내 학습 성공 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] QLoRA 학습 스크립트 (`scripts/train.py`)
- [x] 데이터 전처리 파이프라인 (`training/data.py`, `training/datasets.py`)
- [x] VRAM 최적화 설정 (4-bit quantization, gradient checkpointing)

### Week 8: MLflow 통합

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | MLflow Tracking 연동 | 2h | 실험 로깅 동작 |
| 2 | 모델 레지스트리 설정 | 2h | 모델 등록 성공 |
| 3 | Champion/Challenger Alias 구현 | 3h | Alias 기반 로딩 |
| 4 | 학습 완료 → 자동 Challenger 등록 | 3h | 파이프라인 연결 |
| 5 | MLflow UI 대시보드 확인 | 2h | 실험 비교 가능 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] MLflow 실험 추적 통합 (`training/mlflow_utils.py`)
- [x] Model Registry 설정 (MLflowTracker)
- [x] Champion/Challenger 구조 (`promote_to_champion()` 구현)

### Week 9: 자동 재학습

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | 재학습 트리거 조건 설계 | 2h | 조건 정의 완료 |
| 2 | Redis 이벤트 큐 연동 | 3h | 이벤트 발행/구독 |
| 3 | AutoRetrainTrigger 구현 | 4h | 자동 트리거 동작 |
| 4 | Battle 데이터 → 학습 데이터 변환 | 3h | 우회 패턴 수집 |
| 5 | 전체 재학습 파이프라인 테스트 | 4h | E2E 자동 재학습 성공 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] 자동 재학습 트리거 (RetrainTrigger)
- [x] 이벤트 기반 파이프라인 (Alert System)
- [ ] 데이터 수집 ↔ 학습 연결

---

## ⚙️ Phase 4: MLOps 자동화 (Week 10-11) 🔄

### 목표
- 자동 평가 & 배포
- 모니터링 대시보드
- 품질 추이 시각화

### Week 10: 자동 평가 & 배포

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | ChampionChallengerEvaluator 구현 | 4h | 자동 비교 평가 |
| 2 | 승격 조건 로직 구현 | 2h | 승격 판단 동작 |
| 3 | ModelDeployer (핫 리로드) 구현 | 3h | 모델 교체 성공 |
| 4 | 전체 배포 파이프라인 연결 | 3h | 학습→평가→배포 자동화 |
| 5 | Shadow 평가 모드 구현 | 4h | 실시간 비교 로깅 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] 자동 평가 시스템 (A/B Testing)
- [x] 자동 배포 파이프라인 (Rollback)
- [x] Shadow 평가 모드

### Week 11: 모니터링 & 알림

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | Prometheus 메트릭 정의 & 구현 | 3h | 메트릭 노출 |
| 2 | Grafana 대시보드 구성 | 4h | 주요 지표 시각화 |
| 3 | 품질 추이 그래프 API | 3h | 시계열 데이터 제공 |
| 4 | 알림 규칙 설정 (Alertmanager) | 2h | 임계값 알림 |
| 5 | 전체 시스템 E2E 테스트 | 4h | 10 라운드 → 재학습 → 승격 |
| 6 | 휴식 / 버퍼 | - | - |
| 7 | 휴식 / 버퍼 | - | - |

**산출물:**
- [x] Prometheus 메트릭 수집 (MetricsCollector)
- [x] Grafana 대시보드 (`infra/grafana/provisioning/`)
- [x] 품질 추이 API (Reports)

---

## 📚 Phase 5: 문서화 & 포트폴리오 (Week 12)

### 목표
- 프로젝트 문서 완성
- 데모 영상 제작
- 포트폴리오 정리

### Week 12: 마무리

| 일 | 태스크 | 예상 시간 | 완료 기준 |
|---|--------|----------|----------|
| 1 | README 완성 | 2h | 설치~실행 가이드 |
| 2 | 아키텍처 다이어그램 제작 | 3h | 전체 시스템 도식화 |
| 3 | 품질 향상 그래프 캡처 | 2h | Round 1→N 개선 증명 |
| 4 | 데모 영상 녹화 (5분) | 4h | 시연 영상 완성 |
| 5 | 기술 블로그 초안 작성 | 4h | 블로그 포스트 |
| 6 | GitHub 정리 & 공개 | 2h | 레포지토리 공개 |
| 7 | 최종 점검 | 2h | 체크리스트 완료 |

**산출물:**
- [x] 완성된 README (`README.md`)
- [x] 아키텍처 다이어그램 (`docs/ARCHITECTURE.md` - Mermaid)
- [ ] 품질 향상 그래프
- [ ] 데모 영상 (YouTube/Vimeo)
- [ ] 기술 블로그 포스트

---

## 📊 마일스톤 체크리스트

### M1: 환경 셋업 완료 (Week 2 끝) ✅
- [x] Docker Compose 인프라 동작
- [x] Ollama + Mistral 7B 응답 확인
- [x] Go/Python 프로젝트 뼈대 완성
- [x] DB 스키마 생성

### M2: 공격자 완성 (Week 5 끝) ✅
- [x] 5가지 공격 전략 구현
- [x] LLM 기반 전략 동작
- [x] 공격자 오케스트레이터 완성
- [ ] 100 라운드 배틀 가능

### M3: 방어자 + 학습 완성 (Week 9 끝) ✅
- [x] 베이스라인 모델 추론 서비스
- [x] QLoRA Fine-tuning 성공 (8GB VRAM) - F1=91.3%, RTX 4060 Ti
- [x] MLflow 실험 추적 동작 (MLflowTracker 구현)
- [x] 자동 재학습 트리거 동작 (RetrainTrigger)

### M4: MLOps 자동화 완성 (Week 11 끝) ✅
- [x] Champion/Challenger 자동 비교 (A/B Testing)
- [x] 자동 승격 & 배포 (Rollback, Retrain Trigger)
- [x] Grafana 대시보드 완성 (`infra/grafana/`)
- [x] Drift Detection & Alert System

### M5: 프로젝트 완료 (Week 12 끝) 🔄
- [x] 문서화 완료
- [ ] 품질 향상 그래프 (60% → 90%+)
- [ ] 데모 영상 제작
- [ ] GitHub 공개

---

## ⏰ 일일 루틴 (권장)

```
┌─────────────────────────────────────────────────────────────────┐
│                      일일 개발 루틴                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  09:00 - 09:15  │  데일리 플래닝 (오늘 할 일 정리)            │
│  09:15 - 12:00  │  집중 개발 시간 1 (핵심 태스크)             │
│  12:00 - 13:00  │  점심                                       │
│  13:00 - 15:00  │  집중 개발 시간 2                           │
│  15:00 - 15:30  │  휴식                                       │
│  15:30 - 17:30  │  집중 개발 시간 3                           │
│  17:30 - 18:00  │  일일 회고 & 커밋                           │
│                                                                 │
│  ⚠️ GPU 학습은 밤에 돌리고 다음 날 결과 확인                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🚨 리스크 & 대응

| 리스크 | 가능성 | 영향 | 대응 |
|--------|--------|------|------|
| VRAM 부족으로 학습 실패 | 중 | 높음 | batch_size=1, gradient_checkpointing 적용 |
| LLM 응답 품질 낮음 | 중 | 중 | 프롬프트 튜닝, 다른 모델 시도 |
| 탐지율 개선 미미 | 낮 | 높음 | 데이터 증강, 학습 데이터 품질 개선 |
| 시간 부족 | 중 | 높음 | Phase 4-5 축소, 핵심 기능 우선 |

---

## 📈 성공 지표

### 기술적 성공
- [x] 탐지율: 60% → 91.3% (31%p 개선) ✅
- [x] F1 Score: 0.70 → 0.913 달성 ✅
- [x] 자동 재학습 파이프라인 동작
- [x] 로컬 GPU로 QLoRA 학습 성공 (RTX 4060 Ti 8GB)

### 포트폴리오 성공
- [ ] 품질 향상 그래프 생성
- [ ] 5분 데모 영상 완성
- [ ] GitHub 스타 10개+ (선택)
- [ ] 기술 블로그 포스트 작성

---

*마지막 업데이트: 2026-01-19*
